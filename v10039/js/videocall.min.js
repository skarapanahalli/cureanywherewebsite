var callerType,embed,gruveoCallCode,clientId="demo",embedLoaded=!1;function SendPrescription(){var e=getParameterByName("dn").replace(/ /g,""),o=getParameterByName("ml"),t=getParameterByName("bkc");console.log(e),console.log(o),window.location.href="./pcapture.html?dn="+e+"&ml="+o+"&bkc="+t}function getParameterByName(e,o){o||(o=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(o);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function GruveoInit(){console.log("GruveoCallInit"),embedLoaded=!1;var e=document.createElement("script");e.src="https://www.gruveo.com/embed-api/";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(e,o);var t=new URLSearchParams(window.location.search);gruveoCallCode=t.get("clientcallcode").substring(3);var n=t.has("dn");callerType="Patient",n&&(callerType="Doctor")}function onGruveoEmbedAPIReady(){var e=document.getElementById("myembed");(embed=new Gruveo.Embed("myembed",{responsive:1,width:e.style.width,height:e.style.height,embedParams:{clientid:clientId,color:"034f0d",branding:0,code:gruveoCallCode}})).on("error",onEmbedError).on("requestToSignApiAuthToken",onEmbedRequestToSignApiAuthToken).on("ready",onEmbedReady).on("stateChange",onEmbedStateChange)}function onEmbedRequestToSignApiAuthToken(e){var o=CryptoJS.HmacSHA256(e.token,"W62wB9JjW3tFyUMtF5QhRSbk").toString(CryptoJS.enc.Base64);embed.authorize(o),updateCallStatus("/VideoCallLog.html"+window.location.search+"&ct="+callerType+"&cs=EnteredRoom")}function onEmbedError(e){console.error("Gruveo received error "+e.error+"."),updateCallStatus("/VideoCallLog.html"+window.location.search+"&ct="+callerType+"&cs=CallError:"+e.error)}function onEmbedReady(e){console.log("embed ready, invoking embed.call"),embed.call(gruveoCallCode,!0),embedLoaded=!0}function onEmbedStateChange(e){(console.log("Onstatechange - CurrentState = "+e.state.toString()),"call"==e.state)&&(console.log("Call Started"),updateCallStatus("/VideoCallLog.html"+window.location.search+"&ct="+callerType+"&cs=ConfStarted"));"ready"==e.state&&updateCallStatus("/VideoCallLog.html"+window.location.search+"&ct="+callerType+"&cs=CallEnded")}function updateCallStatus(e){var o=new XMLHttpRequest;console.log(e),o.open("GET",e,!0),o.onload=function(e){4===o.readyState&&(200===o.status?console.log("Successfully invoked the videocalllog.html"):console.error(o.statusText))},o.onerror=function(e){console.error(o.statusText)},o.send(null)}function EnableSendPrescription(){console.log(window.location.href);var e=document.getElementById("SendPrescription");-1<window.location.href.toLowerCase().indexOf("dn")?(console.log("doctor opened url, enabling sendprescription"),e.style.visibility="visible"):e.style.visibility="hidden",e.scrollIntoView()}
//# sourceMappingURL=C:/Debug/videocall.min.js.map